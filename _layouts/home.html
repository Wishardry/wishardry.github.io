---
layout: default
---

<div class="home">
  {%- if page.title -%}
    <h1 class="page-heading">{{ page.title }}</h1>
  {%- endif -%}

  {{ content }}

  {%- if site.posts.size > 0 -%}
    <h2>Recent Posts</h2>
    
    <ul class="post-list" id="post-list">
      {%- for post in site.posts limit:8 -%}
      <li>
        <a href="{{ post.url | relative_url }}" class="post-card">
          <div class="post-header">
            <h3 class="post-link">{{ post.title | escape }}</h3>
            <span class="post-meta">{{ post.date | date: "%B %-d, %Y" }}</span>
          </div>
          <div class="post-excerpt">
            {{ post.excerpt | strip_html | truncatewords: 50 }}
          </div>
        </a>
      </li>
      {%- endfor -%}
    </ul>
    
    {%- if site.posts.size > 8 -%}
    <div class="load-more-container">
      <button class="load-more-btn" onclick="loadMorePosts()">Load More Posts</button>
    </div>
    {%- endif -%}
  {%- endif -%}

</div>

<script>
  let currentPostCount = 8;
  const postsPerLoad = 8;
  const allPosts = [
    {%- for post in site.posts offset:8 -%}
    {
      title: {{ post.title | jsonify }},
      url: {{ post.url | relative_url | jsonify }},
      date: {{ post.date | date: "%B %-d, %Y" | jsonify }},
      excerpt: {{ post.excerpt | strip_html | truncatewords: 50 | jsonify }}
    }{%- unless forloop.last -%},{%- endunless -%}
    {%- endfor -%}
  ];
  
  function loadMorePosts() {
    const postList = document.getElementById('post-list');
    const loadMoreBtn = document.querySelector('.load-more-btn');
    const endIndex = Math.min(currentPostCount + postsPerLoad - 8, allPosts.length);
    
    for (let i = 0; i < endIndex && currentPostCount - 8 < allPosts.length; i++) {
      const post = allPosts[currentPostCount - 8];
      const li = document.createElement('li');
      li.innerHTML = `
        <a href="${post.url}" class="post-card">
          <div class="post-header">
            <h3 class="post-link">${post.title}</h3>
            <span class="post-meta">${post.date}</span>
          </div>
          <div class="post-excerpt">
            ${post.excerpt}
          </div>
        </a>
      `;
      postList.appendChild(li);
      currentPostCount++;
    }
    
    if (currentPostCount - 8 >= allPosts.length) {
      loadMoreBtn.style.display = 'none';
    }
  }
</script>
